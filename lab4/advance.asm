List p=18f4520 
    #include<p18f4520.inc>
    CONFIG OSC = INTIO67
    CONFIG WDT = OFF
    org 0x00 ;PC = 0x00
    
    a macro a1,a2,a3 
	MOVLW a1
	MOVWF 0x00	;a1
	MOVLW a2	
	MOVWF 0x01	;a2
	MOVLW a3	
	MOVWF 0x02	;a3
	endm
    b macro b1,b2,b3 
	MOVLW b1
	MOVWF 0x10	;b1
	MOVLW b2	
	MOVWF 0x11	;b2
	MOVLW b3	
	MOVWF 0x12	;b3
	endm
    a 0x04,0x02,0x04
    b 0x03,0x02,0x06
    RCALL cross
    GOTO exit
    cross:
	c1:
	MOVFF 0x01,WREG	;a2
	MULWF 0x12		;a2*b3
	MOVFF 0x12,WREG
	BTFSC 0x01,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x01,WREG
	BTFSC 0x12,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,0x20
	MOVFF PRODH,0x30
	
	MOVFF 0x02,WREG	;a3
	MULWF 0x11		;a3*b2
	MOVFF 0x11,WREG
	BTFSC 0x02,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x02,WREG
	BTFSC 0x11,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,WREG
	MOVFF PRODH,0x40
	SUBWF 0x20
	MOVLW 0x40
	c2:    
	MOVFF 0x02,WREG	;a3
	MULWF 0x10		;a3*b1
	MOVFF 0x10,WREG
	BTFSC 0x02,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x02,WREG
	BTFSC 0x10,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,0x21
	MOVFF PRODH,0x31
	
	MOVFF 0x00,WREG	;a1
	MULWF 0x12		;a1*b3
	MOVFF 0x12,WREG
	BTFSC 0x00,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x00,WREG
	BTFSC 0x12,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,WREG
	MOVFF PRODH,0x41
	SUBWF 0x21
	MOVLW 0x41
	c3:
	MOVFF 0x00,WREG	;a1
	MULWF 0x11		;a1*b2
	MOVFF 0x11,WREG
	BTFSC 0x00,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x00,WREG
	BTFSC 0x11,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,0x22
	MOVFF PRODH,0x32
	
	MOVFF 0x01,WREG	;a2
	MULWF 0x10		;a2*b1
	MOVFF 0x10,WREG
	BTFSC 0x01,7		;(op1<0)
	    SUBWF PRODH	;PRODH = PRODH - op2
	MOVFF 0x01,WREG
	BTFSC 0x10,7		;(op2<0)
	    SUBWF PRODH	;PRODH = PRODH - op1
	MOVFF PRODL,WREG
	MOVFF PRODH,0x42
	SUBWF 0x22
	MOVLW 0x42
	RETURN
    exit:
    end


